# 2.1 useEffect

`useEffect` ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏±‡∏ô side effect ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å React ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï DOM ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏ä‡πà‡∏ô ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ localStorage ‡∏´‡∏£‡∏∑‡∏≠ subscribe event

<br />

## ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
```jsx
useEffect(() => {
  // side effect
  return () => {
    // cleanup
  };
}, [dependencies]);
```
- effect ‡∏£‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á component render
- dependency array ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤ effect ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏≠‡∏µ‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏£ ‡∏ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡∏∑‡∏≠‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏•‡∏±‡∏á mount
- ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô cleanup ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å timer listener ‡∏´‡∏£‡∏∑‡∏≠ fetch ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà

<br />

## ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: Sync document title

```jsx
import {useEffect, useState} from 'react';

export default function FocusTimer() {
  const [minutes, setMinutes] = useState(25);
  const [isRunning, setIsRunning] = useState(false);

  useEffect(() => {
    document.title = isRunning
      ? `üî¥ Focus (${minutes}m left)`
      : 'Focus timer';
  }, [isRunning, minutes]);

  useEffect(() => {
    if (!isRunning) return;

    const interval = window.setInterval(() => {
      setMinutes((m) => Math.max(m - 1, 0));
    }, 60000);

    return () => window.clearInterval(interval);
  }, [isRunning]);

  return (
    <div className="space-y-4 rounded-2xl border border-indigo-200 p-6">
      <p className="text-5xl font-bold">{minutes}</p>
      <button
        className="rounded-full bg-indigo-600 px-4 py-2 text-white"
        onClick={() => setIsRunning((prev) => !prev)}
      >
        {isRunning ? 'Pause' : 'Start'}
      </button>
    </div>
  );
}
```

<br />

## ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö
- ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô effect ‡∏•‡∏á‡πÉ‡∏ô dependency array
- ‡πÅ‡∏¢‡∏Å effect ‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà (‡πÄ‡∏ä‡πà‡∏ô effect ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏±‡∏ö effect sync title) ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏ß‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô
- ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ async ‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô async ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô effect ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ promise ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô

<br />

## Workshop
- ‡∏™‡∏£‡πâ‡∏≤‡∏á component ‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏á event ‡∏à‡∏≤‡∏Å window (resize, mousemove) ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥ cleanup ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á `localStorage` ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà state ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
- ‡∏ù‡∏∂‡∏Å debug dependency array ‡πÇ‡∏î‡∏¢‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏Å‡∏é ESLint exhaustive-deps

> üí° ‡πÉ‡∏ä‡πâ Playground ‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤.
